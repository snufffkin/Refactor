(function(){"use strict";var e={1257:function(e,t,n){var r=n(3751),a=n(641);const i={class:"sidebar-menu"},s={class:"nav-list"},o={key:0,class:"nav-list"},c={key:1,class:"loading"};function u(e,t,n,r,u,l){const m=(0,a.g2)("NavigationItem");return(0,a.uX)(),(0,a.CE)("div",i,[t[1]||(t[1]=(0,a.Lk)("div",{class:"section-title"},"Основные разделы",-1)),(0,a.Lk)("ul",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.mainSections,(e=>((0,a.uX)(),(0,a.Wv)(m,{key:e.id,item:e,"current-page":u.currentPage,"current-params":u.currentParams,onNavigate:l.navigateTo},null,8,["item","current-page","current-params","onNavigate"])))),128))]),t[2]||(t[2]=(0,a.Lk)("div",{class:"nav-separator"},null,-1)),t[3]||(t[3]=(0,a.Lk)("div",{class:"section-title"},"Структура курсов",-1)),l.programs.length>0?((0,a.uX)(),(0,a.CE)("ul",o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.programs,(e=>((0,a.uX)(),(0,a.Wv)(m,{key:e.id,item:e,"current-page":u.currentPage,"current-params":u.currentParams,onNavigate:l.navigateTo},null,8,["item","current-page","current-params","onNavigate"])))),128))])):((0,a.uX)(),(0,a.CE)("div",c,t[0]||(t[0]=[(0,a.Lk)("div",{class:"loading-spinner"},null,-1),(0,a.Lk)("span",null,"Загрузка навигации...",-1)])))])}var l=n(33);const m={class:"nav-item"},d=["href"],h={key:0,class:"icon"},p=["innerHTML"],g={key:0,class:"nav-item"},v={class:"nav-link-container"},f={class:"nav-link"},k={class:"nav-page-name",style:{color:"rgba(255, 255, 255, 0.5)"}};function C(e,t,n,i,s,o){const c=(0,a.g2)("NavigationItem",!0);return(0,a.uX)(),(0,a.CE)("li",m,[(0,a.Lk)("div",{class:(0,l.C4)(["nav-link-container",o.isActive?"active":""])},[(0,a.Lk)("a",{href:n.item.url,class:"nav-link",onClick:t[0]||(t[0]=(0,r.D$)((t=>e.$emit("navigate",n.item.url)),["prevent"]))},[n.item.icon?((0,a.uX)(),(0,a.CE)("span",h,(0,l.v_)(n.item.icon),1)):((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,l.C4)(["nav-circle",o.getCircleClass])},null,2)),(0,a.Lk)("span",{class:(0,l.C4)(["nav-page-name",o.isActive?"active":""]),innerHTML:o.formatName(n.item.name)},null,10,p)],8,d),o.hasChildren?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"nav-accordion",onClick:t[1]||(t[1]=(0,r.D$)(((...e)=>o.toggleExpanded&&o.toggleExpanded(...e)),["stop"]))},[(0,a.Lk)("span",{class:(0,l.C4)(["nav-accordion-icon",s.isExpanded?"close":"open"])},(0,l.v_)(s.isExpanded?"✕":"+"),3)])):(0,a.Q3)("",!0)],2),o.hasChildren?((0,a.uX)(),(0,a.CE)("ul",{key:0,class:(0,l.C4)(["nav-list",s.isExpanded?"expanded":""])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.getChildren,(r=>((0,a.uX)(),(0,a.Wv)(c,{key:r.id,item:r,"current-page":n.currentPage,"current-params":n.currentParams,onNavigate:t[2]||(t[2]=t=>e.$emit("navigate",t))},null,8,["item","current-page","current-params"])))),128)),n.item.has_more_cards?((0,a.uX)(),(0,a.CE)("li",g,[(0,a.Lk)("div",v,[(0,a.Lk)("span",f,[t[3]||(t[3]=(0,a.Lk)("span",{class:"nav-circle blue"},null,-1)),(0,a.Lk)("span",k," ...ещё "+(0,l.v_)(n.item.more_cards_count)+" карточек ",1)])])])):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0)])}n(8111),n(3579);var P={name:"NavigationItem",props:{item:{type:Object,required:!0},currentPage:{type:String,default:""},currentParams:{type:Object,default:()=>({})}},data(){return{isExpanded:!1}},computed:{hasChildren(){return!!(this.item.children||this.item.modules||this.item.lessons||this.item.groups||this.item.cards&&this.item.cards.length)},getChildren(){return this.item.children||this.item.modules||this.item.lessons||this.item.groups||this.item.cards||[]},isActive(){if(this.item.id===this.currentPage)return!0;if(this.currentParams){if(this.currentParams.program===this.item.id)return!0;if(this.currentParams.module===this.item.id)return!0;if(this.currentParams.lesson===this.item.id)return!0;if(this.currentParams.gz===this.item.id)return!0;if(this.currentParams.card_id===this.item.id)return!0}return!1},getCircleClass(){if(this.item.risk){if(this.item.risk>.75)return"red";if(this.item.risk>.5)return"orange";if(this.item.risk>.25)return"green"}return"blue"}},created(){this.isExpanded=this.isActive||this.hasActiveChild()},methods:{toggleExpanded(){this.isExpanded=!this.isExpanded},hasActiveChild(){const e=this.getChildren;return!!e.length&&e.some((e=>e.id===this.currentPage||(this.currentParams.program===e.id||(this.currentParams.module===e.id||(this.currentParams.lesson===e.id||(this.currentParams.gz===e.id||this.currentParams.card_id===e.id))))))},formatName(e){if(!e)return"";if(e.length>60){let t="",n=0;for(let r=0;r<e.length;r++)t+=e[r],n++,n>=60&&r<e.length-1&&(/[\s.,]/.test(e[r+1])||(t+="<wbr>"),n=0),/[\s.,]/.test(e[r])&&(n=0);return t}return e}}},y=n(6262);const E=(0,y.A)(P,[["render",C]]);var b=E;const w={setComponentReady(){window.parent.postMessage({type:"streamlit:componentReady",apiVersion:1},"*")},onDataFromPython(e){window.addEventListener("message",(function(t){"streamlit:render"===t.data.type&&e(t.data.args)})),this.setComponentReady()},sendDataToPython(e){window.parent.postMessage({type:"streamlit:componentValue",value:e},"*")},setFrameHeight(e){window.parent.postMessage({type:"streamlit:setFrameHeight",height:e||document.body.scrollHeight},"*")}};var L={name:"App",components:{NavigationItem:b},data(){return{navigationData:{main_sections:[],programs:[]},currentPage:"overview",currentParams:{}}},computed:{mainSections(){return this.navigationData.main_sections||[]},programs(){return this.navigationData.programs||[]}},mounted(){w.onDataFromPython((e=>{e.navigationData&&(this.navigationData=e.navigationData),e.currentPage&&(this.currentPage=e.currentPage),e.currentParams&&(this.currentParams=e.currentParams),setTimeout((()=>{w.setFrameHeight()}),100)}))},methods:{navigateTo(e){w.sendDataToPython({action:"navigate",url:e})}}};const x=(0,y.A)(L,[["render",u]]);var X=x;(0,r.Ef)(X).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,i){if(!r){var s=1/0;for(l=0;l<e.length;l++){r=e[l][0],a=e[l][1],i=e[l][2];for(var o=!0,c=0;c<r.length;c++)(!1&i||s>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(o=!1,i<s&&(s=i));if(o){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,a,i]}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,i,s=r[0],o=r[1],c=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var l=c(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self["webpackChunknavigation_component"]=self["webpackChunknavigation_component"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(1257)}));r=n.O(r)})();